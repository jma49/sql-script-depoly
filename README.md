# SQL è„šæœ¬éƒ¨ç½²ä¸ç›‘æ§ç³»ç»Ÿ

[![Version](https://img.shields.io/badge/version-0.2.1-blue.svg)](./package.json)
[![Next.js](https://img.shields.io/badge/Next.js-15.2.4-black.svg)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-6.15.0-green.svg)](https://www.mongodb.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-æ”¯æŒ-336791.svg)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-ç¼“å­˜æ”¯æŒ-red.svg)](https://redis.io/)
[![Clerk](https://img.shields.io/badge/Clerk-è®¤è¯ç³»ç»Ÿ-purple.svg)](https://clerk.com/)

ä¸€ä¸ªåŸºäº Next.js æ„å»ºçš„ç°ä»£åŒ– SQL è„šæœ¬ç®¡ç†ä¸ç›‘æ§ç³»ç»Ÿï¼Œæä¾›å¯è§†åŒ–ç•Œé¢æ¥ç®¡ç†ã€æ‰§è¡Œå’Œç›‘æ§ SQL æ£€æŸ¥è„šæœ¬ã€‚ç³»ç»Ÿæ”¯æŒè‡ªåŠ¨åŒ–æ‰§è¡Œã€å®æ—¶é€šçŸ¥ã€è¯¦ç»†çš„å†å²è®°å½•åˆ†æã€é«˜æ€§èƒ½ç¼“å­˜å±‚å’Œ**ä¼ä¸šçº§èº«ä»½è®¤è¯**ã€‚

## ğŸ“‹ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### v0.2.1 (æœ€æ–°ç‰ˆæœ¬) - ç•Œé¢ä¼˜åŒ–ä¸ç¼–è¾‘å†å²åŠŸèƒ½

#### ğŸ“Š ç¼–è¾‘å†å²åŠŸèƒ½ (å…¨æ–°)

- **å®Œæ•´ç¼–è¾‘å†å²è¿½è¸ª**: è®°å½•æ‰€æœ‰è„šæœ¬çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æ“ä½œ
- **è¯¦ç»†å˜æ›´è®°å½•**: é€å­—æ®µè®°å½•ä¿®æ”¹å‰åçš„å¯¹æ¯”ä¿¡æ¯
- **å¤šç»´åº¦è¿‡æ»¤**: æ”¯æŒæŒ‰è„šæœ¬åç§°ã€ä½œè€…ã€æ“ä½œç±»å‹ã€æ—¶é—´èŒƒå›´ç­›é€‰
- **æ“ä½œå†å²å¯è§†åŒ–**: ç¾è§‚çš„å†å²è®°å½•å±•ç¤ºç•Œé¢ï¼Œæ”¯æŒæŸ¥çœ‹è¯¦ç»†å˜æ›´å†…å®¹
- **æƒé™å®‰å…¨**: åŸºäº Clerk è®¤è¯ç³»ç»Ÿçš„è®¿é—®æ§åˆ¶

#### ğŸ› ï¸ æŠ€æœ¯æ”¹è¿›

- **MongoDB ObjectId ç±»å‹æ”¯æŒ**: å®Œå–„æ•°æ®åº“ç±»å‹å®šä¹‰ï¼Œä¿®å¤æ‰€æœ‰æ„å»ºé”™è¯¯
- **Clerk å®¢æˆ·ç«¯å…¼å®¹æ€§**: è§£å†³æ¨¡å—åŠ è½½é—®é¢˜ï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œ
- **ç¿»è¯‘ç³»ç»Ÿå®Œå–„**: æ–°å¢ç¼–è¾‘å†å²ç›¸å…³çš„ä¸­è‹±æ–‡ç¿»è¯‘é”®
- **è„šæœ¬åˆ é™¤åŠŸèƒ½ä¿®å¤**: è§£å†³è„šæœ¬åˆ é™¤ API è°ƒç”¨é”™è¯¯ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

#### ğŸ—‚ï¸ é¡¹ç›®æ¸…ç†ä¸ä¼˜åŒ– (æ–°å¢)

- **ä¸€æ¬¡æ€§è„šæœ¬å½’æ¡£**: å°†å¼€å‘å’Œæµ‹è¯•å®Œæˆçš„è„šæœ¬ç§»è‡³ `scripts/archived/` ç›®å½•
  - `test-clerk-user.ts` - Clerk ç”¨æˆ·ä¿¡æ¯æµ‹è¯•è„šæœ¬
  - `test-edit-history.ts` - ç¼–è¾‘å†å²åŠŸèƒ½æµ‹è¯•è„šæœ¬
  - `setup-indexes.ts` - æ•°æ®åº“ç´¢å¼•è®¾ç½®è„šæœ¬
- **package.json æ¸…ç†**: ç§»é™¤å·²å½’æ¡£è„šæœ¬çš„ npm è„šæœ¬å¼•ç”¨
- **é¡¹ç›®ç»“æ„ä¼˜åŒ–**: æ·»åŠ å½’æ¡£è„šæœ¬è¯´æ˜æ–‡æ¡£ï¼Œä¾¿äºåç»­ç»´æŠ¤

#### ğŸ”§ å¼€å‘ç¯å¢ƒä¼˜åŒ– (æ–°å¢)

- **CSS 404 é”™è¯¯å¤„ç†**: è§£å†³å¼€å‘æ¨¡å¼ä¸‹é¢‘ç¹å‡ºç°çš„ CSS æ–‡ä»¶ 404 é”™è¯¯
  - ä¼˜åŒ– Next.js é…ç½®ï¼Œå‡å°‘çƒ­é‡è½½å¯¼è‡´çš„æ–‡ä»¶è·¯å¾„å˜æ›´
  - æ·»åŠ å®¢æˆ·ç«¯é”™è¯¯å¤„ç†è„šæœ¬ï¼Œå‹å¥½å¤„ç† CSS åŠ è½½å¤±è´¥
  - æ›´æ–°ä¸­é—´ä»¶é…ç½®ï¼Œæ”¹å–„é™æ€æ–‡ä»¶è¯·æ±‚å¤„ç†
- **å¼€å‘æœåŠ¡å™¨ä¼˜åŒ–**:
  - ä¼˜åŒ–é¡µé¢ç¼“å­˜ç­–ç•¥ï¼Œæå‡å¼€å‘ä½“éªŒ
  - æ·»åŠ  CSS æ¸²æŸ“ä¼˜åŒ–ï¼Œé˜²æ­¢ FOUC (Flash of Unstyled Content)
- **é”™è¯¯å¤„ç†å¢å¼º**:
  - åœ¨ layout.tsx ä¸­æ·»åŠ å…¨å±€ CSS é”™è¯¯è¾¹ç•Œ
  - æ”¹å–„å¼€å‘æ¨¡å¼ä¸‹çš„é”™è¯¯æ—¥å¿—è¾“å‡º
  - ä¼˜åŒ–é™æ€æ–‡ä»¶è¯·æ±‚çš„ä¸­é—´ä»¶å¤„ç†
- **æ„å»ºé…ç½®ç®€åŒ–**:
  - ç§»é™¤å¤æ‚çš„ webpack ç¼“å­˜é…ç½®ï¼Œé¿å…é…ç½®å†²çª
  - ä¿ç•™åŸºç¡€çš„åŒ…å¯¼å…¥ä¼˜åŒ–å’Œ TypeScript é…ç½®
  - ç®€åŒ–æ¸…ç†è„šæœ¬ï¼š`npm run clean:cache`ã€`npm run dev:clean`

### v0.2.0 - èº«ä»½è®¤è¯ç³»ç»Ÿ

- **ğŸ†• Clerk è®¤è¯**: é›†æˆç°ä»£åŒ–èº«ä»½ç®¡ç†ç³»ç»Ÿ
- **ğŸ†• è®¿é—®æ§åˆ¶**: é‚®ç®±åŸŸåé™åˆ¶å’Œé‚€è¯·åˆ¶æ³¨å†Œ
- **ğŸ†• Redis ç¼“å­˜å±‚**: é«˜æ€§èƒ½åˆ†å¸ƒå¼ç¼“å­˜æ”¯æŒ
- **ğŸ†• æ‰¹é‡æ‰§è¡Œå¢å¼º**: å®æ—¶è¿›åº¦ç›‘æ§å’ŒçŠ¶æ€ç®¡ç†

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“ è„šæœ¬ç®¡ç† (CRUD)

- **å¯è§†åŒ–ç®¡ç†ç•Œé¢**: é€šè¿‡ç°ä»£åŒ– Web UI åˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘å’Œåˆ é™¤ SQL è„šæœ¬
- **ğŸ†• æ™ºèƒ½ SQL ç¼–è¾‘å™¨**: é›†æˆ CodeMirror 6ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ã€ä¸»é¢˜åˆ‡æ¢å’Œ**ä¸€é”®ä»£ç æ ¼å¼åŒ–**
- **ğŸ†• å®æ—¶ä»£ç ç»Ÿè®¡**: æ˜¾ç¤ºè¡Œæ•°ã€å­—ç¬¦æ•°ç­‰ä»£ç åº¦é‡ä¿¡æ¯
- **ğŸ†• é¢„è§ˆæ¨¡å¼**: æ”¯æŒç¼–è¾‘/é¢„è§ˆæ¨¡å¼åˆ‡æ¢ï¼Œæä¾›æ›´å¥½çš„ä»£ç æŸ¥çœ‹ä½“éªŒ
- **å¤šè¯­è¨€å…ƒæ•°æ®**: æ”¯æŒä¸­è‹±åŒè¯­çš„è„šæœ¬åç§°ã€æè¿°å’ŒèŒƒå›´è¯´æ˜
- **å®‰å…¨éªŒè¯**: è‡ªåŠ¨æ£€æµ‹å¹¶é˜»æ­¢æœ‰å®³çš„ DDL/DML æ“ä½œï¼Œç¡®ä¿åªè¯»æ‰§è¡Œ

### ğŸš€ è„šæœ¬æ‰§è¡Œ

- **æ‰‹åŠ¨æ‰§è¡Œ**: ä»ä»ªè¡¨ç›˜å¿«é€Ÿé€‰æ‹©å¹¶æ‰§è¡Œå­˜å‚¨çš„è„šæœ¬
- **æ‰¹é‡æ‰§è¡Œ**: æ”¯æŒæ‰§è¡Œæ‰€æœ‰è„šæœ¬æˆ–ä»…æ‰§è¡Œå¯ç”¨å®šæ—¶ä»»åŠ¡çš„è„šæœ¬
- **ğŸ†• å®æ—¶è¿›åº¦ç›‘æ§**: å…¨å±è¿›åº¦å¯¹è¯æ¡†ï¼Œå®æ—¶æ˜¾ç¤ºæ¯ä¸ªè„šæœ¬çš„æ‰§è¡ŒçŠ¶æ€
- **ğŸ†• æ‰¹é‡æ‰§è¡Œç®¡ç†**: æ”¯æŒå–æ¶ˆã€æš‚åœå’Œæ¢å¤æ‰¹é‡æ‰§è¡Œä»»åŠ¡
- **å®Œæ•´ PostgreSQL æ”¯æŒ**: ä¸“ç”¨è§£æå™¨å®Œç¾æ”¯æŒ DO å—ã€å‡½æ•°å®šä¹‰ã€dollar-quoted å­—ç¬¦ä¸²ç­‰å¤æ‚è¯­æ³•
- **ğŸ†• æ™ºèƒ½è¶…æ—¶ä¿æŠ¤**: è‡ªåŠ¨è¯†åˆ«å¤æ‚æŸ¥è¯¢å¹¶è®¾ç½®åˆ†çº§è¶…æ—¶æœºåˆ¶(æ™®é€š 30s/å¤æ‚ 5min)
- **ğŸ†• è¯­æ³•é¢„éªŒè¯**: æ‰§è¡Œå‰æ£€æµ‹ PostgreSQL è¯­æ³•é”™è¯¯ï¼Œæå‡æˆåŠŸç‡
- **GitHub Actions é›†æˆ**: é€šè¿‡ GitHub Actions å®ç°è‡ªåŠ¨åŒ–å®šæ—¶æ‰§è¡Œ
- **Vercel Cron Jobs**: æ”¯æŒ Vercel å¹³å°çš„å®šæ—¶ä»»åŠ¡é…ç½®

### ğŸ”„ Redis ç¼“å­˜å±‚ (æ–°å¢)

- **ğŸ†• é«˜æ€§èƒ½ç¼“å­˜**: ä½¿ç”¨ Redis ä½œä¸ºæ‰¹é‡æ‰§è¡ŒçŠ¶æ€çš„ç¼“å­˜å±‚
- **ğŸ†• åˆ†å¸ƒå¼æ”¯æŒ**: æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ï¼Œè§£å†³å•æœºå†…å­˜é™åˆ¶
- **ğŸ†• åŸå­æ€§æ“ä½œ**: ä½¿ç”¨ Lua è„šæœ¬ç¡®ä¿çŠ¶æ€æ›´æ–°çš„ä¸€è‡´æ€§
- **ğŸ†• æ™ºèƒ½è¿‡æœŸ**: è‡ªåŠ¨ç®¡ç†ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œé¿å…å†…å­˜æ³„æ¼
- **ğŸ†• å¥åº·æ£€æŸ¥**: ä¸“ç”¨ API ç›‘æ§ Redis è¿æ¥çŠ¶æ€å’Œæ€§èƒ½
- **ğŸ†• é™çº§æœºåˆ¶**: Redis ä¸å¯ç”¨æ—¶è‡ªåŠ¨é™çº§åˆ°å†…å­˜å­˜å‚¨
- **ğŸ†• ç¼“å­˜ç»Ÿè®¡**: å®æ—¶ç›‘æ§ç¼“å­˜ä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½æŒ‡æ ‡

### ğŸ“Š ç›‘æ§ä¸åˆ†æ

- **å®æ—¶ä»ªè¡¨ç›˜**: æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€ç»Ÿè®¡ã€æˆåŠŸç‡å’Œè¶‹åŠ¿åˆ†æ
- **ğŸ†• ç°ä»£åŒ–è¡¨æ ¼è®¾è®¡**: é‡‡ç”¨æ¸å˜èƒŒæ™¯ã€æ‚¬åœæ•ˆæœå’Œæ”¹è¿›çš„è§†è§‰è®¾è®¡
- **ğŸ†• æ™ºèƒ½åˆ†é¡µç³»ç»Ÿ**: æ”¯æŒé¡µé¢è·³è½¬ã€æœç´¢è¿‡æ»¤å’ŒçŠ¶æ€ç­›é€‰
- **è¯¦ç»†å†å²è®°å½•**: æ”¯æŒå±•å¼€æŸ¥çœ‹æ‰§è¡Œè¯¦æƒ…ã€åŸå§‹ç»“æœæ•°æ®
- **å¤šç»´åº¦ç­›é€‰**: æŒ‰çŠ¶æ€ã€æ—¶é—´èŒƒå›´ã€è„šæœ¬ç±»å‹è¿›è¡Œç­›é€‰
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå°†æ‰§è¡Œç»“æœå¯¼å‡ºä¸ºå¤šç§æ ¼å¼
- **çŠ¶æ€åˆ†ç±»**: è‡ªåŠ¨è¯†åˆ«æˆåŠŸã€å¤±è´¥å’Œéœ€è¦å…³æ³¨çš„æ‰§è¡Œç»“æœ
- **æ‰§è¡Œç»“æœè¯¦æƒ…**: å®Œæ•´çš„æ‰§è¡ŒæŠ¥å‘Šï¼ŒåŒ…æ‹¬æ•°æ®ç»“æœå’Œè„šæœ¬å…ƒæ•°æ®

### ğŸ”” é€šçŸ¥ç³»ç»Ÿ

- **Slack é›†æˆ**: å®æ—¶å‘é€æ‰§è¡Œç»“æœåˆ° Slack é¢‘é“
- **æ™ºèƒ½è¿‡æ»¤**: åªåœ¨å¤±è´¥æˆ–éœ€è¦å…³æ³¨æ—¶å‘é€é€šçŸ¥ï¼Œå‡å°‘å™ªéŸ³
- **çŠ¶æ€é€šçŸ¥**: åŒºåˆ†æˆåŠŸã€å¤±è´¥å’Œéœ€è¦å…³æ³¨çš„ä¸åŒé€šçŸ¥ç±»å‹
- **æ‰¹é‡é€šçŸ¥**: æ±‡æ€»æŠ¥å‘Šå¤šä¸ªè„šæœ¬çš„æ‰§è¡ŒçŠ¶æ€

### ğŸŒ å›½é™…åŒ–æ”¯æŒ

- **ğŸ†• å®Œæ•´åŒè¯­ç•Œé¢**: ä¸­è‹±æ–‡æ— ç¼åˆ‡æ¢ï¼Œè¦†ç›–æ‰€æœ‰ UI ç»„ä»¶
- **ğŸ†• æ™ºèƒ½ç¿»è¯‘ç³»ç»Ÿ**: åŒ…å« Redis ç¼“å­˜åŠŸèƒ½åœ¨å†…çš„å®Œæ•´æœ¬åœ°åŒ–æ”¯æŒ
- **åŠ¨æ€è¯­è¨€åˆ‡æ¢**: æ— éœ€åˆ·æ–°é¡µé¢å³å¯åˆ‡æ¢ç•Œé¢è¯­è¨€
- **æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´**: æ ¹æ®è¯­è¨€è®¾ç½®æ˜¾ç¤ºæ ¼å¼åŒ–çš„æ—¥æœŸæ—¶é—´

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- **åªè¯»å¼ºåˆ¶**: ä¸¥æ ¼é™åˆ¶ä¸º SELECT æŸ¥è¯¢ï¼Œç¦æ­¢æ•°æ®ä¿®æ”¹æ“ä½œ
- **æƒé™æ§åˆ¶**: Cron Job ç«¯ç‚¹çš„è®¿é—®ä»¤ç‰Œä¿æŠ¤
- **SSL æ”¯æŒ**: æ”¯æŒç”Ÿäº§ç¯å¢ƒçš„ SSL æ•°æ®åº“è¿æ¥
- **è¾“å…¥éªŒè¯**: å…¨é¢çš„ç”¨æˆ·è¾“å…¥éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
- **Redis å®‰å…¨**: æ”¯æŒ Redis å¯†ç è®¤è¯å’Œ SSL è¿æ¥

### ğŸ” èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶ (v0.2.0 æ–°å¢)

- **ğŸ†• Clerk ä¼ä¸šçº§è®¤è¯**: é›†æˆ Clerk è®¤è¯æœåŠ¡ï¼Œæä¾›ç°ä»£åŒ–çš„èº«ä»½ç®¡ç†
- **ğŸ†• Restricted é‚€è¯·åˆ¶**: ä»…é™ç®¡ç†å‘˜é‚€è¯·ç”¨æˆ·æ³¨å†Œï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨
- **ğŸ†• é‚®ç®±åŸŸåé™åˆ¶**: ä¸¥æ ¼é™åˆ¶ä»… @infi.us é‚®ç®±ç”¨æˆ·å¯è®¿é—®ç³»ç»Ÿ
- **ğŸ†• å¤šé‡éªŒè¯æœºåˆ¶**: ä¸­é—´ä»¶çº§åˆ«å’Œé¡µé¢çº§åˆ«åŒé‡è®¤è¯éªŒè¯
- **ğŸ†• å®Œæ•´å›½é™…åŒ–**: è®¤è¯é¡µé¢æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼Œæä¾›æœ¬åœ°åŒ–ä½“éªŒ
- **ğŸ†• è‡ªåŠ¨é‡å®šå‘**: æ™ºèƒ½è·¯ç”±ä¿æŠ¤ï¼Œæœªæˆæƒè®¿é—®è‡ªåŠ¨è·³è½¬è‡³ç›¸åº”é¡µé¢
- **ğŸ†• ç°ä»£åŒ– UI**: ç¾è§‚çš„ç™»å½•/æ³¨å†Œç•Œé¢ï¼Œå“åº”å¼è®¾è®¡é€‚é…å„ç§è®¾å¤‡

### ğŸ¨ ç”¨æˆ·ç•Œé¢å¢å¼º (v0.2.0 æ–°å¢)

- **ğŸ†• åŒè¯­åŒ– Header**: ç³»ç»Ÿæ ‡é¢˜å’ŒçŠ¶æ€æ ‡è¯†æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- **ğŸ†• ç»Ÿä¸€ç¿»è¯‘ç³»ç»Ÿ**: å®Œæ•´çš„ç¿»è¯‘é”®ç®¡ç†ï¼Œæ–°å¢åŠŸèƒ½è‡ªåŠ¨æ”¯æŒå›½é™…åŒ–
- **ğŸ†• ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º**: Header æ˜¾ç¤ºå½“å‰ç”¨æˆ·ä¿¡æ¯å’ŒæˆæƒçŠ¶æ€
- **ğŸ†• ä¸»é¢˜ä¸€è‡´æ€§**: è®¤è¯é¡µé¢ä¸ä¸»ç³»ç»Ÿ UI é£æ ¼å®Œå…¨ç»Ÿä¸€

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web å‰ç«¯       â”‚    â”‚   API åç«¯       â”‚    â”‚   æ‰§è¡Œå¼•æ“       â”‚
â”‚  (Next.js UI)   â”‚â”€â”€â”€â”€â”‚ (Next.js API)   â”‚â”€â”€â”€â”€â”‚ (Node.js/TS)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB        â”‚    â”‚   PostgreSQL    â”‚    â”‚   Redis ç¼“å­˜     â”‚
â”‚ (è„šæœ¬+ç»“æœå­˜å‚¨)  â”‚    â”‚  (ç›®æ ‡æ•°æ®åº“)   â”‚    â”‚ (çŠ¶æ€+ä¼šè¯)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   é€šçŸ¥æœåŠ¡       â”‚
                                              â”‚  (Slack)        â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»è¦ç»„ä»¶

1. **Web åº”ç”¨å±‚ (Next.js 15.2.4)**

   - ç°ä»£åŒ–ä»ªè¡¨ç›˜ç•Œé¢
   - è„šæœ¬ç®¡ç†é¡µé¢ (`/manage-scripts`)
   - æ•°æ®åˆ†æå…¥å£ (`/data-analysis`)
   - æ‰§è¡Œç»“æœè¯¦æƒ…é¡µé¢ (`/view-execution-result/[id]`)
   - **ğŸ†• æ‰¹é‡æ‰§è¡Œè¿›åº¦ç›‘æ§ç•Œé¢**

2. **API æœåŠ¡å±‚**

   - `/api/scripts/*` - è„šæœ¬ CRUD æ“ä½œ
   - `/api/check-history` - æ‰§è¡Œå†å²æŸ¥è¯¢
   - `/api/run-check` - æ‰‹åŠ¨æ‰§è¡Œè§¦å‘
   - `/api/run-scheduled-scripts` - å®šæ—¶æ‰§è¡Œ API
   - `/api/run-all-scripts` - ğŸ†• æ‰¹é‡æ‰§è¡Œ API
   - `/api/batch-execution-status` - ğŸ†• æ‰¹é‡çŠ¶æ€ API
   - `/api/health/redis` - ğŸ†• Redis å¥åº·æ£€æŸ¥
   - `/api/maintenance/cleanup` - ğŸ†• ç¼“å­˜æ¸…ç† API
   - `/api/execution-details/[id]` - è¯¦æƒ…æŸ¥è¯¢ API

3. **æ‰§è¡Œå¼•æ“**

   - `scripts/core/sql-executor.ts` - æ ¸å¿ƒ SQL æ‰§è¡Œé€»è¾‘
   - `scripts/run-all-scripts.ts` - æ‰¹é‡æ‰§è¡Œå·¥å…·
   - `src/lib/script-executor.ts` - API åŒ…è£…å™¨

4. **æ•°æ®å­˜å‚¨**

   - **MongoDB**: è„šæœ¬å®šä¹‰ã€æ‰§è¡Œå†å²ã€å…ƒæ•°æ®
   - **PostgreSQL**: ç›®æ ‡æ•°æ®åº“ï¼ˆåªè¯»æŸ¥è¯¢ï¼‰
   - **ğŸ†• Redis**: æ‰¹é‡æ‰§è¡ŒçŠ¶æ€ã€ä¼šè¯ç¼“å­˜ï¼ˆå¯é€‰ï¼‰

5. **ç¼“å­˜å±‚ (æ–°å¢)**

   - **Redis å®¢æˆ·ç«¯**: ç»Ÿä¸€è¿æ¥ç®¡ç†å’Œè¿æ¥æ± 
   - **çŠ¶æ€ç¼“å­˜**: æ‰¹é‡æ‰§è¡ŒçŠ¶æ€çš„å®æ—¶ç¼“å­˜
   - **å¥åº·ç›‘æ§**: ç¼“å­˜æ€§èƒ½å’Œè¿æ¥çŠ¶æ€ç›‘æ§

6. **è‡ªåŠ¨åŒ–ç³»ç»Ÿ**
   - **GitHub Actions**: å®šæ—¶å’Œæ‰‹åŠ¨è§¦å‘æ‰§è¡Œ
   - **Vercel Cron Jobs**: äº‘ç«¯å®šæ—¶ä»»åŠ¡

## ğŸ“ é¡¹ç›®ç»“æ„

```
sql_script_depoly/
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ sql-check-cron.yml           # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                         # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/                     # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ scripts/             # è„šæœ¬ CRUD API
â”‚   â”‚   â”‚   â”œâ”€â”€ check-history/       # å†å²è®°å½• API
â”‚   â”‚   â”‚   â”œâ”€â”€ run-check/           # æ‰‹åŠ¨æ‰§è¡Œ API
â”‚   â”‚   â”‚   â”œâ”€â”€ run-scheduled-scripts/ # å®šæ—¶æ‰§è¡Œ API
â”‚   â”‚   â”‚   â”œâ”€â”€ run-all-scripts/     # ğŸ†• æ‰¹é‡æ‰§è¡Œ API
â”‚   â”‚   â”‚   â”œâ”€â”€ batch-execution-status/ # ğŸ†• æ‰¹é‡çŠ¶æ€ API
â”‚   â”‚   â”‚   â”œâ”€â”€ health/redis/        # ğŸ†• Rediså¥åº·æ£€æŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ maintenance/cleanup/ # ğŸ†• ç¼“å­˜æ¸…ç†API
â”‚   â”‚   â”‚   â””â”€â”€ execution-details/   # è¯¦æƒ…æŸ¥è¯¢ API
â”‚   â”‚   â”œâ”€â”€ manage-scripts/          # è„šæœ¬ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ data-analysis/           # æ•°æ®åˆ†æé¡µé¢
â”‚   â”‚   â”œâ”€â”€ view-execution-result/   # ç»“æœè¯¦æƒ…é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx                 # ä¸»ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ dashboard/               # ä»ªè¡¨ç›˜ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ CheckHistory.tsx     # å†å²è®°å½•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCards.tsx       # ç»Ÿè®¡å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ ManualTrigger.tsx    # æ‰‹åŠ¨æ‰§è¡Œç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BatchExecutionProgress.tsx # ğŸ†• æ‰¹é‡æ‰§è¡Œè¿›åº¦
â”‚   â”‚   â”‚   â””â”€â”€ types.ts             # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ScriptMetadataForm.tsx # å…ƒæ•°æ®è¡¨å•
â”‚   â”‚   â”‚   â””â”€â”€ CodeMirrorEditor.tsx   # SQL ç¼–è¾‘å™¨
â”‚   â”‚   â””â”€â”€ ui/                      # Shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db.ts                    # PostgreSQL è¿æ¥
â”‚   â”‚   â”œâ”€â”€ mongodb.ts               # MongoDB è¿æ¥
â”‚   â”‚   â”œâ”€â”€ redis.ts                 # ğŸ†• Redis è¿æ¥ç®¡ç†
â”‚   â”‚   â””â”€â”€ script-executor.ts       # æ‰§è¡ŒåŒ…è£…å™¨
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ batch-execution-cache.ts # ğŸ†• æ‰¹é‡æ‰§è¡Œç¼“å­˜æœåŠ¡
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ sql-executor.ts          # æ ¸å¿ƒæ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ slack-service.ts         # Slack é€šçŸ¥æœåŠ¡
â”‚   â”‚   â””â”€â”€ mongo-service.ts         # MongoDB æœåŠ¡
â”‚   â”œâ”€â”€ run-sql.ts                   # å•è„šæœ¬æ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ run-all-scripts.ts           # æ‰¹é‡æ‰§è¡Œå·¥å…·
â”‚   â””â”€â”€ types.ts                     # ç±»å‹å®šä¹‰
â”œâ”€â”€ package.json                     # é¡¹ç›®é…ç½®
â”œâ”€â”€ next.config.js                   # Next.js é…ç½®
â””â”€â”€ vercel.json                      # Vercel éƒ¨ç½²é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.18.0
- MongoDB æ•°æ®åº“
- PostgreSQL æ•°æ®åº“ï¼ˆç›®æ ‡æ•°æ®åº“ï¼‰
- **ğŸ†• Redis æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼Œç”¨äºé«˜æ€§èƒ½ç¼“å­˜ï¼‰**
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <repository-url>
   cd sql_script_depoly
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   ```
